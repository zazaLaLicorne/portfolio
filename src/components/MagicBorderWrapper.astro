---
interface Props {
  class?: string;
  gradientColors?: string;
}

const { 
  class: className = "",
  gradientColors =var(--gradient-primary)
} = Astro.props;
---

<div class={`magic-border-wrapper ${className}`}>
  <div class="magic-border-gradient" data-gradient={gradientColors}></div>
  <div class="magic-border-content">
    <slot />
  </div>
</div>

<style>
  .magic-border-wrapper {
    position: relative;
    border-radius: 1rem;
    padding: 3px;
    background: transparent;
    overflow: hidden;
  }

  .magic-border-gradient {
    position: absolute;
    inset: -3px;
    border-radius: inherit;
    background: linear-gradient(
      90deg,
      #a855f7,
      #ec4899,
      #3b82f6,
      #a855f7
    );
    background-size: 300% 300%;
    animation: borderRotate 4s linear infinite;
    z-index: 0;
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .magic-border-wrapper:hover .magic-border-gradient {
    opacity: 1;
  }

  .magic-border-content {
    position: relative;
    z-index: 1;
    background: var(--bg, #ffffff);
    border-radius: calc(1rem - 3px);
    height: 100%;
    width: 100%;
  }

  /* Dark mode support */
  .dark-mode .magic-border-content {
    background: var(--bg-dark, #1a1a1d);
  }

  @keyframes borderRotate {
    0% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
    100% {
      background-position: 0% 50%;
    }
  }

  /* Variante avec rotation compl√®te */
  .magic-border-wrapper.rotating .magic-border-gradient {
    background: conic-gradient(
      from 0deg,
      #a855f7,
      #ec4899,
      #3b82f6,
      #10b981,
      #a855f7
    );
    animation: borderSpin 3s linear infinite;
  }

  @keyframes borderSpin {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }
</style>