---
import { Image } from "astro:assets";
import { getTechIcon } from "@/lib/techIcons";


interface Props {
  size?: "sm" | "md" | "lg";
}

const { size = "md" } = Astro.props;

// Catégories – on retire les chemins vers /public
// Seule la clé name est nécessaire.
const categories = [
  {
    title: "Conception & Suivi Projet",
    techs: ["Figma", "Canva", "Notion"],
  },
  {
    title: "Langages",
    techs: ["JavaScript", "TypeScript", "HTML", "CSS"],
  },
  {
    title: "Framework Front",
    techs: ["React", "React Native", "Astro", "Next"],
  },
  {
    title: "Backend & BDD",
    techs: ["Node.js", "MongoDB", "Express"],
  },
  {
    title: "Bibliothèques CSS",
    techs: ["TailwindCss", "Daisy UI", "Shadcn/UI"],
  },
  {
    title: "Outils",
    techs: [
      "GitHub",
      "Vercel",
      "Google Analytics",
      "Google Search Console",
      "VSCode",
      "Cloudinary",
    ],
  },
];

const sizeClasses = {
  sm: "w-10 h-10",
  md: "w-16 h-16",
  lg: "w-20 h-20",
};


---


<div class="grid gap-8 md:grid-cols-2 lg:grid-cols-3 text-center">
  {categories.map((category, index) => (
    <div
      class="card glass flex flex-col items-center justify-center p-6"
      data-aos="fade-up"
      data-aos-delay={index * 200}
    >
      <h3 class="mb-4 text-xl font-bold">{category.title}</h3>

      <div class="flex flex-wrap justify-center gap-4">
        {category.techs.map(tech => (
          <div class="flex flex-col items-center transition-transform hover:scale-110">
            <Image
              src={getTechIcon(tech)}
              alt={tech}
              width={100}
              height={100}
              class={`rounded-md object-contain ${sizeClasses[size]}`}
              loading="lazy"
            />
            <span class="text-sm text-center mt-2">{tech}</span>
          </div>
        ))}
      </div>
    </div>
  ))}
</div>



<style>
  .card {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    
  }
  .card:hover {
    transform: translateY(-4px) scale(1.02);
    box-shadow: var(--shadow-lg);
  }

  img {
    transition: transform 0.3s ease, filter 0.3s ease;
  }

  img:hover {
    animation: pulse 1.5s ease-in-out infinite;
    transform: scale(1.15);
  }

  @keyframes pulse {
    0%, 100% {
      transform: scale(1.0);
      filter: brightness(1);
    }
    50% {
      transform: scale(1.1);
      filter: brightness(1.25);
    }
  }
</style>
